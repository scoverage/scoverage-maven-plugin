<!DOCTYPE html>


<!--
 | Generated by Apache Maven Doxia Site Renderer 2.0.0 from src/site/markdown/README.md at 2025-01-17
 | Rendered using Apache Maven Fluido Skin 2.0.0
-->
<html xmlns="http://www.w3.org/1999/xhtml" lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta name="generator" content="Apache Maven Doxia Site Renderer 2.0.0" />
    <title>scoverage-maven-plugin â€“ SCoverage Maven Plugin</title>
    <link rel="stylesheet" href="./css/apache-maven-fluido-2.0.0.min.css" />
    <link rel="stylesheet" href="./css/site.css" />
    <link rel="stylesheet" href="./css/print.css" media="print" />
    <script src="./js/apache-maven-fluido-2.0.0.min.js"></script>
<link rel="stylesheet" href="./css/site.css" type="text/css"/>
  </head>
  <body>
    <div class="container-fluid container-fluid-top">
      <header>
        <div id="banner">
          <div class="pull-left"><div id="bannerLeft"><h1>SCoverage Maven Plugin</h1></div></div>
          <div class="pull-right"><div id="bannerRight"><h1><img class="class java.lang.Object" src="images/my-avatar-80.png" /></h1></div></div>
          <div class="clear"><hr/></div>
        </div>

        <div id="breadcrumbs">
          <ul class="breadcrumb">
        <li id="publishDate">Last Published: 2025-01-17<span class="divider">|</span>
</li>
          <li id="projectVersion">Version: 2.1.0</li>
          </ul>
        </div>
      </header>
      <div class="row-fluid">
        <header id="leftColumn" class="span3">
          <nav class="well sidebar-nav">
  <ul class="nav nav-list">
   <li class="nav-header">Overview</li>
    <li class="active"><a>Introduction</a></li>
    <li><a href="plugin-info.html">Goals</a></li>
    <li><a href="apidocs/index.html">JavaDocs</a></li>
   <li class="nav-header">Project Documentation</li>
    <li><a href="project-info.html"><span class="icon-chevron-right"></span>Project Information</a></li>
    <li><a href="project-reports.html"><span class="icon-chevron-right"></span>Project Reports</a></li>
  </ul>
          </nav>
          <div class="well sidebar-nav">
            <div id="poweredBy">
              <div class="clear"></div>
              <div class="clear"></div>
<a href="https://maven.apache.org/" class="builtBy" target="_blank"><img class="builtBy" alt="Built by Maven" src="./images/logos/maven-feather.png" /></a>
            </div>
          </div>
        </header>
        <main id="bodyColumn" class="span9">
<section><a id="scoverage-maven-plugin"></a>
<h1>scoverage-maven-plugin</h1>
<p>scoverage-maven-plugin is a plugin for Maven that integrates the scoverage code coverage library. Find out more about <a href="https://github.com/scoverage/scalac-scoverage-plugin" class="externalLink">scoverage</a>.</p>
<p><a href="https://github.com/scoverage/scoverage-maven-plugin/actions/workflows/ci.yml" class="externalLink"><img src="https://github.com/scoverage/scoverage-maven-plugin/actions/workflows/ci.yml/badge.svg" alt="Build Status" /></a>
<a href="http://search.maven.org/#search|ga|1|g%3A%22org.scoverage%22%20AND%20a%3A%22scoverage-maven-plugin%22" class="externalLink"><img src="https://maven-badges.herokuapp.com/maven-central/org.scoverage/scoverage-maven-plugin/badge.svg" alt="Maven Central" /></a>
<a href="http://www.apache.org/licenses/LICENSE-2.0.txt" class="externalLink"><img src="http://img.shields.io/:license-Apache%202-red.svg" alt="License" /></a>
<a href="https://gitter.im/scoverage/scoverage-maven-plugin" class="externalLink"><img src="https://img.shields.io/gitter/room/scoverage/scoverage.svg" alt="Gitter" /></a></p><section><section><a id="How_to_use"></a>
<h3>How to use</h3>
<p>mostly used mojos:</p>
<ul>

<li>
<p><strong><a href="http://scoverage.github.io/scoverage-maven-plugin/2.0.6/check-mojo.html" class="externalLink">check</a></strong> goal compiles classes with instrumentation, runs unit tests and checks coverage,</p></li>
<li>
<p><strong><a href="http://scoverage.github.io/scoverage-maven-plugin/2.0.6/report-mojo.html" class="externalLink">report</a></strong> goal compiles classes with instrumentation, runs unit tests and generates reports,</p></li>
<li>
<p><strong><a href="http://scoverage.github.io/scoverage-maven-plugin/2.0.6/integration-check-mojo.html" class="externalLink">integration-check</a></strong> goal compiles classes with instrumentation, runs unit and integration tests and checks coverage,</p></li>
<li>
<p><strong><a href="http://scoverage.github.io/scoverage-maven-plugin/2.0.6/integration-report-mojo.html" class="externalLink">integration-report</a></strong> goal compiles classes with instrumentation, runs unit and integration tests and generates reports,</p></li>
</ul>
<p>additional, sometimes useful, mojos:</p>
<ul>

<li>
<p><strong><a href="http://scoverage.github.io/scoverage-maven-plugin/2.0.6/test-mojo.html" class="externalLink">test</a></strong> goal compiles classes with instrumentation and runs unit tests,</p></li>
<li>
<p><strong><a href="http://scoverage.github.io/scoverage-maven-plugin/2.0.6/integration-test-mojo.html" class="externalLink">integration-test</a></strong> goal compiles classes with instrumentation and runs unit and integration tests,</p></li>
<li>
<p><strong><a href="http://scoverage.github.io/scoverage-maven-plugin/2.0.6/check-only-mojo.html" class="externalLink">check-only</a></strong> goal only checks coverage using coverage data generated earlier in the build (by <strong>test</strong>, <strong>report</strong>, <strong>integration-test</strong> or <strong>integration-report</strong> goal).</p></li>
<li>
<p><strong><a href="http://scoverage.github.io/scoverage-maven-plugin/2.0.6/report-only-mojo.html" class="externalLink">report-only</a></strong> goal generates reports using coverage data generated earlier in the build (by <strong>test</strong>, <strong>check</strong>, <strong>integration-test</strong> or <strong>integration-check</strong> goal),</p></li>
<li>
<p><strong><a href="http://scoverage.github.io/scoverage-maven-plugin/2.0.6/package-mojo.html" class="externalLink">package</a></strong> goal generates artifact file containing instrumented classes (e.g. for testing outside of the Maven build),</p></li>
</ul>
<p>internal mojos:</p>
<ul>

<li><strong><a href="http://scoverage.github.io/scoverage-maven-plugin/2.0.6/pre-compile-mojo.html" class="externalLink">pre-compile</a></strong> and <strong><a href="http://scoverage.github.io/scoverage-maven-plugin/2.0.6/post-compile-mojo.html" class="externalLink">post-compile</a></strong> are internal goals, they configure Maven build in forked <code>scoverage</code> life cycle; don't use them.</li>
</ul></section><section><a id="Maven_generated_plugin_documentation"></a>
<h3>Maven generated plugin documentation</h3>
<table class="table table-striped">
<thead>
<tr class="a">
<th>Version</th>
<th>Documentation</th></tr></thead><tbody>
<tr class="b">
<td><code>2.0.6</code></td>
<td><a href="http://scoverage.github.io/scoverage-maven-plugin/2.0.6/plugin-info.html" class="externalLink">Plugin Info</a></td></tr>
<tr class="a">
<td><code>1.4.11</code></td>
<td><a href="http://scoverage.github.io/scoverage-maven-plugin/1.4.11/plugin-info.html" class="externalLink">Plugin Info</a></td></tr></tbody>
</table>
</section><section><a id="Prerequisites_.2F_limitations"></a>
<h3>Prerequisites / limitations</h3>
<ul>

<li>The plugin is compatible with <a href="http://davidb.github.io/scala-maven-plugin/" class="externalLink">Scala Maven Plugin</a>
<ul>

<li>version <code>3.0.0</code> or later required</li>
<li><a href="http://davidb.github.io/scala-maven-plugin/compile-mojo.html#addScalacArgs" class="externalLink">addScalacArgs</a> and <a href="http://davidb.github.io/scala-maven-plugin/compile-mojo.html#analysisCacheFile" class="externalLink">analysisCacheFile</a> configuration parameters cannot be set directly, use project properties <code>addScalacArgs</code> and <code>analysisCacheFile</code> instead.</li>
</ul></li>
<li>Starting with version <code>2.1.0</code> JDK <code>17+</code>, Maven <code>3.6.3</code> and <code>maven-site-plugin</code> <code>3.20.0+</code> are required.</li>
<li>Starting with version <code>2.0.0</code> the plugin supports Scala <code>2.12.8+</code>, <code>2.13.0+</code> and <code>3.2.0+</code>. For Scala <code>2.12.7</code> and lower please use version <code>1.4.11</code> of the plugin.</li>
<li>The plugin is not thread-safe, so it should not be used in multi-threaded builds.</li>
</ul></section><section><a id="Scoverage_Maven_plugin_version"></a>
<h3>Scoverage Maven plugin version</h3>
<p>This can be set as project property.</p>

<pre class="prettyprint"><code class="language-xml">&lt;project&gt;
    &lt;properties&gt;
        &lt;scoverage.plugin.version&gt;2.0.6&lt;/scoverage.plugin.version&gt;
    &lt;/properties&gt;
&lt;/project&gt;
</code></pre></section><section><a id="Scala_version_configuration"></a>
<h3>Scala version configuration</h3>
<p>The plugin automatically loads and configures matching <code>scalac-scoverage-plugin</code> artifact when needed.
For this to work the Scala version has to be set. It can be done by defining the <code>scalaVersion</code> plugin configuration parameter or the <code>scala.version</code> project property.
Without this setting, the plugin will try to resolve the Scala version from the <code>scala-library</code> dependency of the project.
If all the attempts to resolve the Scala version fail, then coverage will not be calculated.</p>

<pre class="prettyprint"><code class="language-xml">&lt;project&gt;
    &lt;properties&gt;
        &lt;scala.version&gt;2.13.15&lt;/scala.version&gt;
    &lt;/properties&gt;
&lt;/project&gt;
</code></pre>
<p>or</p>

<pre class="prettyprint"><code class="language-xml">&lt;project&gt;
    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.scoverage&lt;/groupId&gt;
                &lt;artifactId&gt;scoverage-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;${scoverage.plugin.version}&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;scalaVersion&gt;2.13.15&lt;/scalaVersion&gt;
                    &lt;!-- other parameters --&gt;
                &lt;/configuration&gt;
             &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
&lt;/project&gt;
</code></pre>
<p>The first method is better because once the property is defined its value can be used in other places of the build file.
For example in the <code>scala-library</code> dependency version every Scala build should declare.</p>

<pre class="prettyprint"><code class="language-xml">&lt;project&gt;
    &lt;dependencies&gt;
        &lt;dependency&gt;
            &lt;groupId&gt;org.scala-lang&lt;/groupId&gt;
            &lt;artifactId&gt;scala-library&lt;/artifactId&gt;
            &lt;version&gt;${scala.version}&lt;/version&gt;
        &lt;/dependency&gt;
    &lt;/dependencies&gt;
&lt;/project&gt;
</code></pre></section><section><a id="Scalac_SCoverage_plugin_version_configuration"></a>
<h3>Scalac SCoverage plugin version configuration</h3>
<p>Maven SCoverage plugin uses by default the latest version of the <a href="https://github.com/scoverage/scalac-scoverage-plugin" class="externalLink">scalac-scoverage-plugin</a> available on its release day.
If newer, better version of <a href="https://github.com/scoverage/scalac-scoverage-plugin" class="externalLink">scalac-scoverage-plugin</a> is available, it can be used instead.
It can be configured by defining the <code>scalacPluginVersion</code> plugin configuration parameter or the <code>scoverage.scalacPluginVersion</code> project property.</p>

<pre class="prettyprint"><code class="language-xml">&lt;project&gt;
    &lt;properties&gt;
        &lt;scoverage.scalacPluginVersion&gt;2.3.0&lt;/scoverage.scalacPluginVersion&gt;
    &lt;/properties&gt;
&lt;/project&gt;
</code></pre>
<p>or</p>

<pre class="prettyprint"><code class="language-xml">&lt;project&gt;
    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.scoverage&lt;/groupId&gt;
                &lt;artifactId&gt;scoverage-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;${scoverage.plugin.version}&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;scalacPluginVersion&gt;2.3.0&lt;/scalacPluginVersion&gt;
                    &lt;!-- other parameters --&gt;
                &lt;/configuration&gt;
             &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
&lt;/project&gt;
</code></pre></section><section><a id="Integration_tests_coverage_check_and_reports"></a>
<h3>Integration tests coverage check and reports</h3>
<p><code>integration-check</code> and <code>integration-report</code> mojos are similar to <code>check</code> and <code>report</code> mojos, but they execute forked <code>scoverage</code> life cycle up to <code>verify</code> phase (integration tests are usually executed in <code>integration-test</code> phase).</p></section><section><a id="Aggregated_reports_for_multi-module_projects"></a>
<h3>Aggregated reports for multi-module projects</h3>
<p>There is no separate mojo for aggregated reports, there is <code>aggregate</code> parameter.
To additionally generate aggregated SCoverage report for root module, when generating regular reports,
set <code>aggregate</code> parameter value to <code>true</code>.
It works only in multimodule projects, the aggregated report will be generated in the current
execution root.</p>
<p>It can be configured by defining the <code>aggregate</code> plugin configuration parameter or the <code>scoverage.aggregate</code> project property.</p>

<pre class="prettyprint"><code class="language-xml">&lt;project&gt;
    &lt;properties&gt;
        &lt;scoverage.aggregate&gt;true&lt;/scoverage.aggregate&gt;
    &lt;/properties&gt;
&lt;/project&gt;
</code></pre>
<p>in <code>build/plugins</code> or <code>build/pluginManagement</code> section when running reports directly from console (e.g. <code>mvn scoverage:report</code>)</p>

<pre class="prettyprint"><code class="language-xml">&lt;project&gt;
    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.scoverage&lt;/groupId&gt;
                &lt;artifactId&gt;scoverage-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;${scoverage.plugin.version}&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;aggregate&gt;true&lt;/aggregate&gt;
                &lt;/configuration&gt;
             &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
&lt;/project&gt;
</code></pre>
<p>or in <code>reporting/plugins</code> section when adding report to Maven generated site</p>

<pre class="prettyprint"><code class="language-xml">&lt;project&gt;
    &lt;reporting&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.scoverage&lt;/groupId&gt;
                &lt;artifactId&gt;scoverage-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;${scoverage.plugin.version}&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;aggregate&gt;true&lt;/aggregate&gt;
                &lt;/configuration&gt;
             &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/reporting&gt;
&lt;/project&gt;
</code></pre>
<p>Since version <code>1.4.0-M5</code> it's possible to generate aggregated report only, without generating reports for individual modules. For large projects it can decrease build time significantly.</p>
<p>To generate only aggregated SCoverage report, set <code>aggregateOnly</code> parameter value to <code>true</code>. It works only in multimodule projects.</p>
<p>It can be configured by defining the <code>aggregateOnly</code> plugin configuration parameter or the <code>scoverage.aggregateOnly</code> project property.</p>

<pre class="prettyprint"><code class="language-xml">&lt;project&gt;
    &lt;properties&gt;
        &lt;scoverage.aggregateOnly&gt;true&lt;/scoverage.aggregateOnly&gt;
    &lt;/properties&gt;
&lt;/project&gt;
</code></pre>
<p>in <code>build/plugins</code> or <code>build/pluginManagement</code> section when running reports directly from console (e.g. <code>mvn scoverage:report</code>)</p>

<pre class="prettyprint"><code class="language-xml">&lt;project&gt;
    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.scoverage&lt;/groupId&gt;
                &lt;artifactId&gt;scoverage-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;${scoverage.plugin.version}&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;aggregateOnly&gt;true&lt;/aggregateOnly&gt;
                &lt;/configuration&gt;
             &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
&lt;/project&gt;
</code></pre>
<p>or in <code>reporting/plugins</code> section when adding report to Maven generated site</p>

<pre class="prettyprint"><code class="language-xml">&lt;project&gt;
    &lt;reporting&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.scoverage&lt;/groupId&gt;
                &lt;artifactId&gt;scoverage-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;${scoverage.plugin.version}&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;aggregateOnly&gt;true&lt;/aggregateOnly&gt;
                &lt;/configuration&gt;
             &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/reporting&gt;
&lt;/project&gt;
</code></pre></section><section><a id="Adding_SCoverage_report_to_site"></a>
<h3>Adding SCoverage report to site</h3>
<p>Add the plugin to reporting section of your project and configure it to generate one of reporting mojos.
By default, Maven executes all plugin's reporting mojos, but the SCoverage plugin has three such mojos,
and it does not make sense to execute them all because every executed report will overwrite the previous one.
Configure one of them depending on your case.</p>

<pre class="prettyprint"><code class="language-xml">&lt;project&gt;
    &lt;reporting&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.scoverage&lt;/groupId&gt;
                &lt;artifactId&gt;scoverage-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;${scoverage.plugin.version}&lt;/version&gt;
                &lt;reportSets&gt;
                    &lt;reportSet&gt;
                        &lt;reports&gt;
                            &lt;report&gt;report&lt;/report&gt;
                            &lt;!-- or &lt;report&gt;integration-report&lt;/report&gt; --&gt;
                            &lt;!-- or &lt;report&gt;report-only&lt;/report&gt; --&gt;
                        &lt;/reports&gt;
                    &lt;/reportSet&gt;
                &lt;/reportSets&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/reporting&gt;
&lt;/project&gt;
</code></pre>
<p>Which reporting mojo should be selected:</p>
<table class="table table-striped">
<thead>
<tr class="a">
<th>Reporting mojo</th>
<th>When</th></tr></thead><tbody>
<tr class="b">
<td><a href="http://scoverage.github.io/scoverage-maven-plugin/2.0.6/report-mojo.html" class="externalLink">report</a></td>
<td>When not using integration tests (most cases)</td></tr>
<tr class="a">
<td><a href="http://scoverage.github.io/scoverage-maven-plugin/2.0.6/integration-report-mojo.html" class="externalLink">integration-report</a></td>
<td>When using integration tests</td></tr>
<tr class="b">
<td><a href="http://scoverage.github.io/scoverage-maven-plugin/2.0.6/report-only-mojo.html" class="externalLink">report-only</a></td>
<td>When coverage data was already generated (usually by <a href="http://scoverage.github.io/scoverage-maven-plugin/2.0.6/check-mojo.html" class="externalLink">check</a> or <a href="http://scoverage.github.io/scoverage-maven-plugin/2.0.6/integration-check-mojo.html" class="externalLink">integration-check</a> mojo)</td></tr></tbody>
</table>
</section><section><a id="Customizing_code_instrumentation"></a>
<h3>Customizing code instrumentation</h3>
<p>If you want to customize plugin's configuration parameters used by compilation supporting part of the plugin, do it in &#x2018;plugins&#x2019; or &#x2018;pluginManagement&#x2019; section:</p>

<pre class="prettyprint"><code class="language-xml">&lt;project&gt;
    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.scoverage&lt;/groupId&gt;
                &lt;artifactId&gt;scoverage-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;${scoverage.plugin.version}&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;highlighting&gt;true&lt;/highlighting&gt;
                    &lt;!-- example configuration for Play! Framework 2.x project --&gt;
                    &lt;excludedPackages&gt;views.html.*&lt;/excludedPackages&gt; 
                    &lt;excludedFiles&gt;.*?routes_(routing|reverseRouting)&lt;/excludedFiles&gt;
                &lt;/configuration&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
&lt;/project&gt;
</code></pre>
<p>Read <a href="https://github.com/scoverage/sbt-scoverage" class="externalLink">SBT SCoverage Plugin documentation</a> for more information about
<a href="https://github.com/scoverage/sbt-scoverage?tab=readme-ov-file#exclude-classes-and-packages-and-files" class="externalLink">excludedPackages and excludedFiles</a>.</p>
<p>File and package exclusions are supported for Scala 2, Scala [<code>3.3.4</code>-<code>3.4.0</code>) and <code>3.4.2</code>+.</p></section><section><a id="Checking_minimum_test_coverage_level"></a>
<h3>Checking minimum test coverage level</h3>

<pre class="prettyprint"><code class="language-xml">&lt;project&gt;
    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.scoverage&lt;/groupId&gt;
                &lt;artifactId&gt;scoverage-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;${scoverage.plugin.version}&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;minimumCoverage&gt;95&lt;/minimumCoverage&gt;
                    &lt;minimumCoverageBranchTotal&gt;90&lt;/minimumCoverageBranchTotal&gt;
                    &lt;minimumCoverageStmtPerPackage&gt;90&lt;/minimumCoverageStmtPerPackage&gt;
                    &lt;minimumCoverageBranchPerPackage&gt;85&lt;/minimumCoverageBranchPerPackage&gt;
                    &lt;minimumCoverageStmtPerFile&gt;85&lt;/minimumCoverageStmtPerFile&gt;
                    &lt;minimumCoverageBranchPerFile&gt;80&lt;/minimumCoverageBranchPerFile&gt;
                    &lt;failOnMinimumCoverage&gt;true&lt;/failOnMinimumCoverage&gt;
                &lt;/configuration&gt;
                &lt;executions&gt;
                    &lt;execution&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;check&lt;/goal&gt; &lt;!-- or integration-check --&gt;
                        &lt;/goals&gt;
                    &lt;/execution&gt;
                &lt;/executions&gt;
             &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
&lt;/project&gt;
</code></pre>
<p>Run <code>mvn scoverage:check</code> to perform the check. See below if you want to use <code>mvn verify</code> to perform the check.</p>
<p>Read <a href="https://github.com/scoverage/sbt-scoverage#minimum-coverage" class="externalLink">SBT SCoverage Plugin documentation</a> for more information.</p></section><section><a id="Checking_minimum_test_coverage_level_AND_adding_report_to_site"></a>
<h3>Checking minimum test coverage level AND adding report to site</h3>

<pre class="prettyprint"><code class="language-xml">&lt;project&gt;
    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.scoverage&lt;/groupId&gt;
                &lt;artifactId&gt;scoverage-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;${scoverage.plugin.version}&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;minimumCoverage&gt;80&lt;/minimumCoverage&gt;
                    &lt;failOnMinimumCoverage&gt;true&lt;/failOnMinimumCoverage&gt;
                &lt;/configuration&gt;
                &lt;executions&gt;
                    &lt;execution&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;check&lt;/goal&gt; &lt;!-- or integration-check --&gt;
                        &lt;/goals&gt;
                    &lt;/execution&gt;
                &lt;/executions&gt;
             &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;

    &lt;reporting&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.scoverage&lt;/groupId&gt;
                &lt;artifactId&gt;scoverage-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;${scoverage.plugin.version}&lt;/version&gt;
                &lt;reportSets&gt;
                    &lt;reportSet&gt;
                        &lt;reports&gt;
                            &lt;report&gt;report-only&lt;/report&gt;
                        &lt;/reports&gt;
                    &lt;/reportSet&gt;
                &lt;/reportSets&gt;
            &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/reporting&gt;
&lt;/project&gt;
</code></pre>
<p>Run <code>mvn scoverage:check</code> to perform the check and <code>mvn scoverage:report</code> to generate the report.</p></section><section><a id="Checking_minimum_test_coverage_level_automatically"></a>
<h3>Checking minimum test coverage level automatically</h3>
<p>If you want <code>mvn verify</code> and <code>mvn install</code> to check the coverage level, you have to change your POM
so that SCoverage takes over running all the tests.</p>
<p>The reason for this is that SCoverage instruments classes during compilation and writes them to disk.
We don't want to accidentally deploy these instrumented classes, so SCoverage keeps them separate.
SCoverage does this by forking the current Maven build and running it again, while performing instrumentation.
In a normal setup this causes the tests to be run twice: once in the outer run with the original classes
and once in the SCoverage-forked run with the instrumented classes.</p>
<p>Since version <code>1.4.0-M5</code> it's possible to make the tests run only once. You have to configure your pom to turn off testing in the outer run and tell SCoverage to run all tests in the forked run.</p>
<p>This example shows the required configuration:</p>

<pre class="prettyprint"><code class="language-xml">&lt;project&gt;
    &lt;properties&gt;
        &lt;skipTests&gt;true&lt;/skipTests&gt; &lt;!-- disable surefire and failsafe tests --&gt;
    &lt;/properties&gt;
...
    &lt;build&gt;
        &lt;plugins&gt;
            &lt;plugin&gt;
                &lt;groupId&gt;org.scoverage&lt;/groupId&gt;
                &lt;artifactId&gt;scoverage-maven-plugin&lt;/artifactId&gt;
                &lt;version&gt;${scoverage.plugin.version}&lt;/version&gt;
                &lt;configuration&gt;
                    &lt;minimumCoverage&gt;80&lt;/minimumCoverage&gt;
                    &lt;failOnMinimumCoverage&gt;true&lt;/failOnMinimumCoverage&gt;

                    &lt;!-- enable surefire and failsafe tests in SCoverage --&gt;
                    &lt;additionalForkedProjectProperties&gt;skipTests=false&lt;/additionalForkedProjectProperties&gt;
                &lt;/configuration&gt;
                &lt;executions&gt;
                    &lt;execution&gt;
                        &lt;goals&gt;
                            &lt;goal&gt;check&lt;/goal&gt; &lt;!-- or integration-check --&gt;
                        &lt;/goals&gt;
                        &lt;phase&gt;prepare-package&lt;/phase&gt; &lt;!-- or any other phase --&gt;
                    &lt;/execution&gt;
                &lt;/executions&gt;
             &lt;/plugin&gt;
        &lt;/plugins&gt;
    &lt;/build&gt;
&lt;/project&gt;
</code></pre>
<p>Run <code>mvn clean verify</code> or <code>mvn clean install</code> to run the tests with coverage and all other static analysis you have configured.</p>
<p>If you want to set multiple properties from within <code>&lt;additionalForkedProjectProperties&gt;</code>, for instance because you want to disable other plugins from running twice, you can separate them with a semicolon:</p>
<p><code>&lt;additionalForkedProjectProperties&gt;skipTests=false;skip.scalafmt=false&lt;/additionalForkedProjectProperties&gt;</code></p></section></section><section><a id="Examples"></a>
<h2>Examples</h2>
<p>There are many example projects in <a href="src/it">integration tests</a> directory. To run them, execute <code>mvn integration-test</code>.
To execute only one of them, execute <code>mvn integration-test -Dinvoker.test=test_aggregate</code>, where <code>test_aggregate</code> is the name of the directory with the example project.</p>
<p>Also, there are many <a href="https://github.com/scoverage/scoverage-maven-samples/tree/scoverage-maven-samples-1.4.11/" class="externalLink">example projects</a> for older versions of the plugin in a separate repo.
Go to one of them and run <code>mvn site</code>.</p></section><section><a id="Development"></a>
<h2>Development</h2><section><a id="Snapshot_deployment"></a>
<h3>Snapshot deployment</h3>
<p>A new snapshot is deployed to sonatype on each commit merged to <code>main</code> branch. See <a href=".github/workflows/snapshot.yml">snapshot.yml</a> workflow for details.</p></section><section><a id="New_release_deployment"></a>
<h3>New release deployment</h3><section><a id="Prerequisites"></a>
<h4>Prerequisites</h4>
<p>Set sonatype credentials in <code>~/.m2/settings.xml</code>:</p>

<pre class="prettyprint"><code class="language-xml">&lt;settings&gt;
  &lt;servers&gt;
    &lt;server&gt;
      &lt;id&gt;central&lt;/id&gt;
      &lt;username&gt;sonatype-username-goes-here&lt;/username&gt;
      &lt;password&gt;sonatype-password-goes-here&lt;/password&gt;
    &lt;/server&gt;
  &lt;/servers&gt;
&lt;/settings&gt;
</code></pre>
<p>Make sure you have proper pgp keys set up. See <a href="https://central.sonatype.org/pages/working-with-pgp-signatures.html" class="externalLink">Maven Central Guide</a> for details.</p></section><section><a id="Steps"></a>
<h4>Steps</h4>
<ol style="list-style-type: decimal;">

<li>Run
<code>mvn -Darguments=&quot;-Dmaven.test.skip=true&quot; -B release:clean release:prepare release:perform -P release</code>.</li>
<li>Wait ~ 8 hours for sync to maven central.</li>
<li>Check jars are available in maven central <a href="https://search.maven.org/artifact/org.scoverage/scoverage-maven-plugin" class="externalLink">https://search.maven.org/artifact/org.scoverage/scoverage-maven-plugin</a> and GH label in README is updated.</li>
<li>Checkout new tag, e.g. <code>git checkout scoverage-maven-plugin-2.0.6</code>.</li>
<li>Generate site docs with <code>mvn clean site -P publicsite</code> and check that all required docs are generated in <code>./target/site</code>.</li>
<li>Checkout <code>gh-pages</code> branch, e.g. <code>git checkout gh-pages</code>.</li>
<li>Copy generated site to new directory named as version number, e.g. <code>cp -r ./target/site ./2.0.6</code>, commit and push.</li>
<li>Wait several seconds for the docs to be published and verify, e.g. <a href="https://scoverage.github.io/scoverage-maven-plugin/2.0.6/check-mojo.html" class="externalLink">https://scoverage.github.io/scoverage-maven-plugin/2.0.6/check-mojo.html</a>.</li>
<li>Checkout <code>main</code> branch, e.g. <code>git checkout main</code>.</li>
<li>Update versions in README, e.g. <code>sed -i 's/2.0.3/2.0.6/g' README.md</code>, commit and push.</li>
<li>Create new Release on GitHub.</li>
</ol>
<p>This process will be fully or partially automated in the future.</p></section></section></section><section><a id="License"></a>
<h2>License</h2>

<pre class="prettyprint"><code class="nohighlight nocode">This software is licensed under the Apache 2 license, quoted below.

Copyright 2014-2024 Grzegorz Slowikowski

Licensed under the Apache License, Version 2.0 (the &quot;License&quot;); you may not
use this file except in compliance with the License. You may obtain a copy of
the License at

    http://www.apache.org/licenses/LICENSE-2.0

Unless required by applicable law or agreed to in writing, software
distributed under the License is distributed on an &quot;AS IS&quot; BASIS, WITHOUT
WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied. See the
License for the specific language governing permissions and limitations under
the License.
</code></pre></section></section>        </main>
      </div>
    </div>
    <hr/>
    <footer>
      <div class="container-fluid">
        <div class="row-fluid">
            <p>Â©      2014â€“2025
</p>
        </div>
      </div>
    </footer>
  </body>
</html>
